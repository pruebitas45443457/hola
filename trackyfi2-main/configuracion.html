<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Configuración - TrackYfi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap y FontAwesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="configuracion.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flag-icons/css/flag-icons.min.css">
</head>
<body>
    <!-- Barra superior -->
    <div class="top-actions">
        <button class="btn btn-outline-dark btn-sm d-flex align-items-center gap-2" id="btnAtras" type="button">
            <i class="fas fa-arrow-left"></i>
            <span data-i18n="atras">Atrás</span>
        </button>
        <button class="btn btn-outline-dark btn-sm d-flex align-items-center gap-2" id="btnModo" type="button">
            <i class="fas fa-moon" id="iconModo"></i>
            <span id="textoModo" data-i18n="modo_oscuro">Modo oscuro</span>
        </button>
        <div class="dropdown">
            <button class="btn btn-outline-dark btn-sm dropdown-toggle d-flex align-items-center gap-2"
                type="button" id="btnPreferencias" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="fas fa-sliders-h"></i>
                <span data-i18n="preferencias">Preferencias</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="btnPreferencias">
                <li>
                    <button class="dropdown-item idioma-opcion" data-idioma="es">
                        <span class="fi fi-es"></span> Español
                    </button>
                </li>
                <li>
                    <button class="dropdown-item idioma-opcion" data-idioma="en">
                        <span class="fi fi-gb"></span> English
                    </button>
                </li>
                <li>
                    <button class="dropdown-item idioma-opcion" data-idioma="fr">
                        <span class="fi fi-fr"></span> Français
                    </button>
                </li>
                <li>
                    <button class="dropdown-item idioma-opcion" data-idioma="de">
                        <span class="fi fi-de"></span> Deutsch
                    </button>
                </li>
            </ul>
        </div>
        <button class="btn btn-save px-5 d-flex align-items-center gap-2" data-i18n="guardar" type="button">
            Guardar Cambios
            <i class="fas fa-save"></i>
        </button>
    </div>

    <div class="config-panel shadow-lg">
        <!-- Avatar y nombre -->
        <div class="avatar-block">
            <img src="https://i.pravatar.cc/150?img=3" alt="Avatar" class="avatar-img" id="avatarImg">
            <div id="userName">bienvenido</div>
        </div>

        <!-- Selector de avatar -->
        <div id="avatarSelector" class="avatar-selector d-none">
            <div class="avatar-selector-inner">
                <div class="avatar-list">
                    <img src="https://i.pravatar.cc/150?img=3" class="avatar-option" alt="Avatar 1">
                    <img src="https://i.pravatar.cc/150?img=5" class="avatar-option" alt="Avatar 2">
                    <img src="https://i.pravatar.cc/150?img=7" class="avatar-option" alt="Avatar 3">
                    <img src="https://i.pravatar.cc/150?img=8" class="avatar-option" alt="Avatar 4">
                    <img src="https://i.pravatar.cc/150?img=10" class="avatar-option" alt="Avatar 5">
                </div>
                <button class="btn btn-outline-info btn-sm mt-2" id="closeAvatarSelector" data-i18n="cerrar">Cerrar</button>
            </div>
        </div>

        <!-- Fila de formularios -->
        <div class="formularios-row">
            <!-- Datos personales -->
            <div class="card-setting datos-personales mb-4">
                <div class="section-title"><i class="fas fa-user"></i> <span data-i18n="datos_personales">Datos personales</span></div>
                <div class="setting-row">
                    <span class="setting-label" data-i18n="correo">Correo electrónico</span>
                    <span id="userEmail">usuario@email.com</span>
                    <button class="btn btn-outline-info btn-sm" onclick="showEmailModal()" data-i18n="cambiar"><i class="fas fa-pen"></i> Cambiar</button>
                </div>
                <div class="setting-row">
                    <span class="setting-label" data-i18n="contraseña">Contraseña</span>
                    <span>••••••••</span>
                    <button class="btn btn-outline-info btn-sm" onclick="alert('Función de cambio de contraseña próximamente')" data-i18n="cambiar"><i class="fas fa-key"></i> Cambiar</button>
                </div>
            </div>

            <!-- Notificaciones -->
            <div class="card-setting notificaciones mb-4">
                <div class="section-title"><i class="fas fa-bell"></i> <span data-i18n="notificaciones">Notificaciones</span></div>
                <div class="setting-row">
                    <span class="setting-label" data-i18n="alertas_precios">Alertas de precios</span>
                    <div class="switch-container">
                        <input type="checkbox" id="priceAlerts" class="checkbox" hidden>
                        <span class="switch">
                            <span class="slider"></span>
                        </span>
                    </div>
                    <button class="btn btn-outline-info btn-sm ms-3" id="testPriceAlert" type="button">
                        <i class="fas fa-bell"></i> Probar alerta
                    </button>
                </div>
                <div class="setting-row">
                    <span class="setting-label" data-i18n="novedades">Novedades y sugerencias</span>
                    <div class="switch-container">
                        <input type="checkbox" id="newsAlerts" class="checkbox" hidden>
                        <span class="switch">
                            <span class="slider"></span>
                        </span>
                    </div>
                    <button class="btn btn-outline-info btn-sm ms-3" id="testNewsAlert" type="button">
                        <i class="fas fa-envelope-open-text"></i> Probar novedad
                    </button>
                </div>
                <div class="setting-row">
                    <span class="setting-label" data-i18n="notificaciones_email">Notificaciones por email</span>
                    <div class="switch-container">
                        <input type="checkbox" id="emailAlerts" class="checkbox" hidden>
                        <span class="switch">
                            <span class="slider"></span>
                        </span>
                    </div>
                    <button class="btn btn-outline-info btn-sm ms-3" id="testEmailAlert" type="button">
                        <i class="fas fa-paper-plane"></i> Probar email
                    </button>
                </div>
            </div>
        </div>

        <!-- Sugerencias -->
        <div class="card-setting suggestion-block mb-4">
            <div class="section-title"><i class="fas fa-lightbulb"></i> <span data-i18n="sugerencias">Sugerencias para mejorar</span></div>
            <textarea id="suggestions" placeholder="¿Qué te gustaría ver mejorado o agregado?" data-i18n-placeholder="placeholder_sugerencias"></textarea>
            <button class="btn btn-outline-info btn-sm mt-2" onclick="alert('¡Gracias por tu sugerencia!')" data-i18n="enviar"><i class="fas fa-paper-plane"></i> Enviar</button>
        </div>

        <!-- Suscripción -->
        <div class="premium-card mb-4 text-center">
            <i class="fas fa-crown fa-2x mb-2"></i>
            <div data-i18n="premium_desc">Accede a análisis avanzados, alertas ilimitadas y soporte prioritario.</div>
            <button type="button" class="btn btn-light btn-sm mt-3" id="subscribeBtn" data-i18n="suscribirse"><i class="fas fa-star"></i> Suscribirse</button>
        </div>
    </div>

    <!-- Modal para cambiar email -->
    <div class="modal fade" id="emailModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content bg-dark text-light">
          <div class="modal-header">
            <h5 class="modal-title" data-i18n="cambiar_correo">Cambiar correo electrónico</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <input type="email" class="form-control" id="newEmail" placeholder="Nuevo correo" data-i18n-placeholder="placeholder_nuevo_correo">
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" onclick="saveEmail()" data-i18n="guardar">Guardar</button>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="configuracion.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
      (function(){
        emailjs.init('TU_USER_ID_DE_EMAILJS'); // Reemplaza con tu User ID de EmailJS
      })();
    </script>
</body>
</html>